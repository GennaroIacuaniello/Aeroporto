<!DOCTYPE HTML>
<html lang="java">
<head>
<!-- Generated by javadoc (21) on Thu Jul 24 01:26:29 CEST 2025 -->
<title>CustomerDAOImpl</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2025-07-24">
<meta name="description" content="declaration: package: implementazioni_postgres_dao, class: CustomerDAOImpl">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">implementazioni_postgres_dao</a></div>
<h1 title="Class CustomerDAOImpl" class="title">Class CustomerDAOImpl</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">implementazioni_postgres_dao.CustomerDAOImpl</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../dao/CustomerDAO.html" title="interface in dao">CustomerDAO</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">CustomerDAOImpl</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../dao/CustomerDAO.html" title="interface in dao">CustomerDAO</a></span></div>
<div class="block">PostgreSQL implementation of the CustomerDAO interface for managing customer user operations.
 <p>
 This class provides concrete implementations for all customer-related database operations
 defined in the <a href="../dao/CustomerDAO.html" title="interface in dao"><code>CustomerDAO</code></a> interface. It handles all customer account management
 functions including authentication, account creation, updates, and deletion operations
 using PostgreSQL database connectivity.
 </p>
 <p>
 The implementation provides comprehensive customer management capabilities including:
 </p>
 <ul>
   <li>Customer authentication with username/password and email/password combinations</li>
   <li>Secure customer account creation with duplicate validation</li>
   <li>Customer profile updates with cross-table uniqueness validation</li>
   <li>Soft deletion of customer accounts through status flags</li>
   <li>Cross-table validation to prevent username/email conflicts with administrator accounts</li>
 </ul>
 <p>
 All database operations use prepared statements to prevent SQL injection attacks and ensure
 data security. The class implements proper connection management using the singleton
 <a href="../database/ConnessioneDatabase.html" title="class in database"><code>ConnessioneDatabase</code></a> pattern and handles resource cleanup through try-with-resources
 statements.
 </p>
 <p>
 Customer accounts have more flexible requirements compared to administrator accounts:
 </p>
 <ul>
   <li>Email addresses are optional for customer accounts (can be null during creation)</li>
   <li>Usernames must be unique across both Customer and Admin tables</li>
   <li>Email addresses must be unique across both Customer and Admin tables when provided</li>
   <li>Only active (non-deleted) accounts are considered during authentication and validation</li>
 </ul>
 <p>
 The class handles authentication failures by throwing <a href="../dao/UserNotFoundException.html" title="class in dao"><code>UserNotFoundException</code></a> when
 credentials don't match any active customer accounts. Account creation and update
 operations throw <a href="../dao/UserAlreadyExistsException.html" title="class in dao"><code>UserAlreadyExistsException</code></a> when attempting to use credentials
 that already exist in the system.
 </p>
 <p>
 All methods follow the contract defined by the <a href="../dao/CustomerDAO.html" title="interface in dao"><code>CustomerDAO</code></a> interface and maintain
 data consistency through proper transaction handling and validation mechanisms.
 </p></div>
<dl class="notes">
<dt>Since:</dt>
<dd>1.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../dao/CustomerDAO.html" title="interface in dao"><code>CustomerDAO</code></a></li>
<li><a href="../model/Customer.html" title="class in model"><code>Customer</code></a></li>
<li><a href="../dao/UserAlreadyExistsException.html" title="class in dao"><code>UserAlreadyExistsException</code></a></li>
<li><a href="../dao/UserNotFoundException.html" title="class in dao"><code>UserNotFoundException</code></a></li>
<li><a href="../database/ConnessioneDatabase.html" title="class in database"><code>ConnessioneDatabase</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">CustomerDAOImpl</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteCustomer(java.lang.Integer)" class="member-name-link">deleteCustomer</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;userID)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Marks a customer account as deleted in the system.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#insertNewCustomer(java.lang.String,java.lang.String,java.lang.String)" class="member-name-link">insertNewCustomer</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;mail,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates a new customer account in the system.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#searchUserByMail(java.util.List,java.util.List,java.lang.String,java.lang.String)" class="member-name-link">searchUserByMail</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;userID,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;mail,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Searches for a customer by email address and validates the provided password.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#searchUserByUsername(java.util.List,java.lang.String,java.util.List,java.lang.String)" class="member-name-link">searchUserByUsername</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;userID,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mail,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Searches for a customer by username and validates the provided password.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateCustomer(java.lang.Integer,java.lang.String,java.lang.String,java.lang.String)" class="member-name-link">updateCustomer</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;userID,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;mail,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates an existing customer's account information.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>CustomerDAOImpl</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">CustomerDAOImpl</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="searchUserByUsername(java.util.List,java.lang.String,java.util.List,java.lang.String)">
<h3>searchUserByUsername</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">searchUserByUsername</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;userID,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mail,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</span>
                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Searches for a customer by username and validates the provided password.
 <p>
 This method performs customer authentication by searching for a user with the
 specified username and verifying the provided password hash. Upon successful
 authentication, it retrieves the customer's ID and email address for
 session management and user identification purposes.
 </p>
 <p>
 The method populates the provided lists with matching customer data:
 </p>
 <ul>
   <li>userID list receives the customer's unique identifier</li>
   <li>mail list receives the customer's email address (can be null)</li>
 </ul>
 <p>
 Only active (non-deleted) customer accounts are considered during the search.
 The password parameter should be provided in hashed format for security purposes.
 </p>
 <p>
 This implementation executes a SQL query against the Customer table to find a customer
 with the specified username and password combination. The query filters out deleted accounts
 by checking the is_deleted flag and only considers active customer accounts.
 </p>
 <p>
 The method uses prepared statements for secure parameter binding and proper resource
 management through try-with-resources. Upon successful authentication, it populates
 the provided lists with the customer's ID and email address for session management.
 </p>
 <p>
 Authentication failure occurs when:
 </p>
 <ul>
   <li>No customer exists with the specified username</li>
   <li>The provided password doesn't match the stored hashed password</li>
   <li>The customer account has been marked as deleted</li>
 </ul></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../dao/CustomerDAO.html#searchUserByUsername(java.util.List,java.lang.String,java.util.List,java.lang.String)">searchUserByUsername</a></code>&nbsp;in interface&nbsp;<code><a href="../dao/CustomerDAO.html" title="interface in dao">CustomerDAO</a></code></dd>
<dt>Parameters:</dt>
<dd><code>userID</code> - list to be populated with the customer's unique identifier</dd>
<dd><code>username</code> - the customer's username to search for, must not be null</dd>
<dd><code>mail</code> - list to be populated with the customer's email address (can be null)</dd>
<dd><code>password</code> - the hashed password to verify against the stored password</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if a database access error occurs during the operation</dd>
<dd><code><a href="../dao/UserNotFoundException.html" title="class in dao">UserNotFoundException</a></code> - if no customer is found with the specified username and password combination</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="searchUserByMail(java.util.List,java.util.List,java.lang.String,java.lang.String)">
<h3>searchUserByMail</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">searchUserByMail</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;userID,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;mail,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</span>
                      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Searches for a customer by email address and validates the provided password.
 <p>
 This method performs customer authentication by searching for a user with the
 specified email address and verifying the provided password hash. Upon successful
 authentication, it retrieves the customer's ID and username for session
 management and user identification purposes.
 </p>
 <p>
 The method populates the provided lists with matching customer data:
 </p>
 <ul>
   <li>userID list receives the customer's unique identifier</li>
   <li>username list receives the customer's username</li>
 </ul>
 <p>
 Only active (non-deleted) customer accounts are considered during the search.
 The password parameter should be provided in hashed format for security purposes.
 Note that customers may have null email addresses, so this method may not find
 all customer accounts.
 </p>
 <p>
 This implementation executes a SQL query against the Customer table to find a customer
 with the specified email address and password combination. The query filters out deleted
 accounts by checking the is_deleted flag and only considers active customer accounts.
 </p>
 <p>
 The method uses prepared statements for secure parameter binding and proper resource
 management through try-with-resources. Upon successful authentication, it populates
 the provided lists with the customer's ID and username for session management.
 </p>
 <p>
 Authentication failure occurs when:
 </p>
 <ul>
   <li>No customer exists with the specified email address</li>
   <li>The provided password doesn't match the stored hashed password</li>
   <li>The customer account has been marked as deleted</li>
 </ul></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../dao/CustomerDAO.html#searchUserByMail(java.util.List,java.util.List,java.lang.String,java.lang.String)">searchUserByMail</a></code>&nbsp;in interface&nbsp;<code><a href="../dao/CustomerDAO.html" title="interface in dao">CustomerDAO</a></code></dd>
<dt>Parameters:</dt>
<dd><code>userID</code> - list to be populated with the customer's unique identifier</dd>
<dd><code>username</code> - list to be populated with the customer's username</dd>
<dd><code>mail</code> - the customer's email address to search for, must not be null</dd>
<dd><code>password</code> - the hashed password to verify against the stored password</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if a database access error occurs during the operation</dd>
<dd><code><a href="../dao/UserNotFoundException.html" title="class in dao">UserNotFoundException</a></code> - if no customer is found with the specified email and password combination</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="insertNewCustomer(java.lang.String,java.lang.String,java.lang.String)">
<h3>insertNewCustomer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">insertNewCustomer</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;mail,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</span>
                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Creates a new customer account in the system.
 <p>
 This method creates a new customer user with the specified credentials.
 Before creating the account, it performs comprehensive validation to ensure
 that the username and email address (if provided) are unique across both
 customer and administrator accounts to prevent conflicts and maintain data integrity.
 </p>
 <p>
 The method enforces the following business rules:
 </p>
 <ul>
   <li>Username must be unique across all user types (Customer and Admin)</li>
   <li>Email address must be unique across all user types if provided</li>
   <li>Email address is optional for customer accounts (can be null)</li>
   <li>Password must be provided in hashed format</li>
 </ul>
 <p>
 The newly created customer account will be active by default and can
 immediately be used for authentication, flight booking, and other customer services.
 </p>
 <p>
 This implementation performs a two-step operation: first validating that the username
 and email address (if provided) are unique across both Customer and Admin tables, then
 inserting the new customer account if validation passes.
 </p>
 <p>
 The validation query uses UNION ALL to check for existing usernames and email addresses
 in both user tables, ensuring system-wide uniqueness. Only active (non-deleted) accounts
 are considered during the validation process to allow reuse of credentials from deleted accounts.
 </p>
 <p>
 The insertion process creates a new customer record with:
 </p>
 <ul>
   <li>Unique username across all user types</li>
   <li>Unique email address across all user types (if provided)</li>
   <li>Hashed password for security</li>
   <li>Active status (is_deleted = false) by default</li>
   <li>Auto-generated unique customer ID</li>
 </ul>
 <p>
 Unlike administrator accounts, customer accounts allow null email addresses during
 creation, providing flexibility for customers who prefer not to provide email information.
 </p>
 <p>
 The method uses prepared statements for both validation and insertion operations,
 ensuring secure parameter binding and SQL injection prevention.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../dao/CustomerDAO.html#insertNewCustomer(java.lang.String,java.lang.String,java.lang.String)">insertNewCustomer</a></code>&nbsp;in interface&nbsp;<code><a href="../dao/CustomerDAO.html" title="interface in dao">CustomerDAO</a></code></dd>
<dt>Parameters:</dt>
<dd><code>mail</code> - the email address for the new customer account, can be null</dd>
<dd><code>username</code> - the username for the new customer account, must not be null and must be unique</dd>
<dd><code>password</code> - the hashed password for the new customer account, must not be null</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if a database access error occurs during the operation</dd>
<dd><code><a href="../dao/UserAlreadyExistsException.html" title="class in dao">UserAlreadyExistsException</a></code> - if the username or email address is already in use by another user</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateCustomer(java.lang.Integer,java.lang.String,java.lang.String,java.lang.String)">
<h3>updateCustomer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateCustomer</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;userID,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;mail,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</span>
                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Updates an existing customer's account information.
 <p>
 This method modifies the email, username, and password for an existing customer
 account identified by the provided user ID. Before performing the update,
 it validates that the new username and email address are unique across all
 user accounts to prevent conflicts.
 </p>
 <p>
 The method enforces the following validation rules:
 </p>
 <ul>
   <li>New username must be unique across all user types (Customer and Admin)</li>
   <li>New email address must be unique across all user types if provided</li>
   <li>Username and email cannot be the same as any existing user except the current user</li>
   <li>Only active (non-deleted) accounts are considered during uniqueness validation</li>
   <li>Password must be provided in hashed format</li>
 </ul>
 <p>
 This method allows customers to update all their account information including
 email addresses, providing full account management capabilities.
 </p>
 <p>
 This implementation performs a two-step operation: first validating that the new username
 and email address are unique across both Customer and Admin tables (excluding the current
 customer), then updating the customer account if validation passes.
 </p>
 <p>
 The validation query uses UNION ALL to check for existing usernames and email addresses
 in both user tables while excluding the current customer account from the Customer table check.
 This allows customers to keep their existing credentials while preventing conflicts with other users.
 Only active (non-deleted) accounts are considered during validation.
 </p>
 <p>
 The update process modifies the customer record with:
 </p>
 <ul>
   <li>New username (validated for uniqueness across all user types)</li>
   <li>New email address (validated for uniqueness across all user types, can be null)</li>
   <li>New hashed password for security</li>
   <li>Maintained account status and creation timestamp</li>
 </ul>
 <p>
 Unlike administrator updates, customer updates support modifying email addresses,
 providing full account management capabilities including the ability to add, change,
 or remove email addresses from customer accounts.
 </p>
 <p>
 The method uses prepared statements for both validation and update operations,
 ensuring secure parameter binding and SQL injection prevention.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../dao/CustomerDAO.html#updateCustomer(java.lang.Integer,java.lang.String,java.lang.String,java.lang.String)">updateCustomer</a></code>&nbsp;in interface&nbsp;<code><a href="../dao/CustomerDAO.html" title="interface in dao">CustomerDAO</a></code></dd>
<dt>Parameters:</dt>
<dd><code>userID</code> - the unique identifier of the customer account to update</dd>
<dd><code>mail</code> - the new email address for the customer account, can be null</dd>
<dd><code>username</code> - the new username for the customer account, must be unique</dd>
<dd><code>password</code> - the new hashed password for the customer account</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if a database access error occurs during the operation</dd>
<dd><code><a href="../dao/UserAlreadyExistsException.html" title="class in dao">UserAlreadyExistsException</a></code> - if the new username or email address is already in use by another user</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteCustomer(java.lang.Integer)">
<h3>deleteCustomer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deleteCustomer</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;userID)</span>
                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Marks a customer account as deleted in the system.
 <p>
 This method performs a soft delete operation on the specified customer
 account by marking it as deleted rather than physically removing the record
 from the database. This approach preserves data integrity, audit trails,
 and historical booking information while preventing the account from being
 used for authentication or new operations.
 </p>
 <p>
 After deletion, the customer account:
 </p>
 <ul>
   <li>Cannot be used for authentication or login</li>
   <li>Will not appear in active user searches</li>
   <li>Username and email become available for reuse</li>
   <li>Historical bookings and travel data are preserved</li>
   <li>Associated booking records remain intact for reporting</li>
 </ul>
 <p>
 The deletion operation is irreversible through normal application operations
 and would require direct database access to restore the account. This ensures
 data consistency while maintaining historical travel records for business
 intelligence and customer service purposes.
 </p>
 <p>
 This implementation performs a soft deletion by setting the is_deleted flag to true
 rather than physically removing the customer record from the database. This
 approach preserves data integrity and maintains audit trails for customer
 transactions and booking history while preventing the account from being used for authentication.
 </p>
 <p>
 The soft deletion process:
 </p>
 <ul>
   <li>Sets is_deleted = true for the specified customer account</li>
   <li>Preserves all account data for audit and historical purposes</li>
   <li>Prevents the account from being used for future authentication</li>
   <li>Allows the username and email to be reused for new accounts</li>
   <li>Maintains referential integrity with related booking and transaction records</li>
 </ul>
 <p>
 Once deleted, the customer account will be excluded from authentication
 queries and validation checks, effectively removing access while preserving
 historical data for compliance, audit requirements, and customer service purposes.
 This is particularly important for customer accounts due to their association
 with financial transactions and booking records.
 </p>
 <p>
 The method uses prepared statements for secure parameter binding and SQL
 injection prevention.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../dao/CustomerDAO.html#deleteCustomer(java.lang.Integer)">deleteCustomer</a></code>&nbsp;in interface&nbsp;<code><a href="../dao/CustomerDAO.html" title="interface in dao">CustomerDAO</a></code></dd>
<dt>Parameters:</dt>
<dd><code>userID</code> - the unique identifier of the customer account to delete</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if a database access error occurs during the operation</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
